!function(e,t){"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){let n=t.jQuery,r=t.console;function h(e,t,i){if(!(this instanceof h))return new h(e,t,i);let s=e;var o;"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=(o=s,Array.isArray(o)?o:"object"==typeof o&&"number"==typeof o.length?[...o]:[o]),this.options={},"function"==typeof t?i=t:Object.assign(this.options,t),i&&this.on("always",i),this.getImages(),n&&(this.jqDeferred=new n.Deferred),setTimeout(this.check.bind(this))):r.error(`Bad element for imagesLoaded ${s||e}`)}(h.prototype=Object.create(e.prototype)).getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};const o=[1,9,11];h.prototype.addElementImages=function(e){"IMG"===e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t,i,s=e["nodeType"];if(s&&o.includes(s)){for(t of e.querySelectorAll("img"))this.addImage(t);if("string"==typeof this.options.background)for(i of e.querySelectorAll(this.options.background))this.addElementBackgroundImages(i)}};const a=/url\((['"])?(.*?)\1\)/gi;function i(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}return h.prototype.addElementBackgroundImages=function(t){var i=getComputedStyle(t);if(i){let e=a.exec(i.backgroundImage);for(;null!==e;){var s=e&&e[2];s&&this.addBackground(s,t),e=a.exec(i.backgroundImage)}}},h.prototype.addImage=function(e){e=new i(e);this.images.push(e)},h.prototype.addBackground=function(e,t){t=new s(e,t);this.images.push(t)},h.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,this.images.length){let t=(e,t,i)=>{setTimeout(()=>{this.progress(e,t,i)})};this.images.forEach(function(e){e.once("progress",t),e.check()})}else this.complete()},h.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&r&&r.log(`progress: ${i}`,e,t)},h.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(i.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src)},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(e,t){this.isLoaded=e;var e=this.img["parentNode"],e="PICTURE"===e.nodeName?e:this.img;this.emitEvent("progress",[this,e,t])},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(s.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(h.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&(n=e,n.fn.imagesLoaded=function(e,t){let i=new h(this,e,t);return i.jqDeferred.promise(n(this))})})(),h});